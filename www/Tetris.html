<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tetris</title>
    <style>
        body { display: flex; flex-direction: column; align-items: center; }
        canvas { border: 1px solid black; }
        #score { font-size: 24px; }
    </style>
</head>
<body>
    <h1>Tetris</h1>
    <canvas id="gameCanvas" width="300" height="600"></canvas>
    <div id="score">Score: 0</div>
    <button id="pauseButton">Pause</button>
    <div id="nextPiecePreview"></div>
    <script type="module">
        import React, { useState, useMemo, useEffect } from 'https://cdn.skypack.dev/react';

        const pieceColors = [
            'cyan', 'blue', 'orange', 'yellow', 'green', 'purple', 'red'
        ];

        function Tetris() {
            const [score, setScore] = useState(0);
            const [isPaused, setIsPaused] = useState(false);
            const [nextPiece, setNextPiece] = useState(getRandomPiece());
            const [highScore, setHighScore] = useState(loadHighScore());
            const [difficulty, setDifficulty] = useState(1000);
            const canvasRef = React.useRef(null);

            const pieceRotation = useMemo(() => {
                // Handle piece rotation logic
            }, [nextPiece]);

            useEffect(() => {
                const canvas = canvasRef.current;
                const context = canvas.getContext('2d');
                // Game loop, rendering, and collision detection here
            }, [isPaused, nextPiece]);

            useEffect(() => {
                window.addEventListener('keydown', handleKeyDown);
                return () => {
                    window.removeEventListener('keydown', handleKeyDown);
                };
            }, []);

            function handleKeyDown(event) {
                // Handle user input, updating game state
            }

            function togglePause() {
                setIsPaused(prev => !prev);
            }

            function loadHighScore() {
                return localStorage.getItem('highScore') || 0;
            }

            function getRandomPiece() {
                return Math.floor(Math.random() * pieceColors.length);
            }

            return (
                <div>
                    <canvas ref={canvasRef} width="300" height="600" />
                    <div id="score">Score: {score}</div>
                    <button onClick={togglePause}>{isPaused ? 'Resume' : 'Pause'}</button>
                    <div id="nextPiecePreview">Next piece: {nextPiece}</div>
                </div>
            );
        }

        ReactDOM.render(<Tetris />, document.getElementById('gameCanvas'));
    </script>
</body>
</html>